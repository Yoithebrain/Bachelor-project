
<<<<<<< HEAD
var assert = require('assert')
var slice = require('sliced')
var mongo = require('mongodb')
var utils = require('../../').utils;

var uri = process.env.MQUERY_URI || 'mongodb://localhost/mquery';
var db;

exports.getCollection = function (cb) {
  mongo.MongoClient.connect(uri, function (err, db_) {
    assert.ifError(err);
    db = db_;
=======
var assert = require('assert');
var mongo = require('mongodb');

var uri = process.env.MQUERY_URI || 'mongodb://localhost/mquery';
var client;
var db;

exports.getCollection = function(cb) {
  mongo.MongoClient.connect(uri, function(err, _client) {
    assert.ifError(err);
    client = _client;
    db = client.db();
>>>>>>> dev

    var collection = db.collection('stuff');

    // clean test db before starting
<<<<<<< HEAD
    db.dropDatabase(function () {
      cb(null, collection);
    });
  })
}

exports.dropCollection = function (cb) {
  db.dropDatabase(function () {
    db.close(cb);
  })
}
=======
    db.dropDatabase(function() {
      cb(null, collection);
    });
  });
};

exports.dropCollection = function(cb) {
  db.dropDatabase(function() {
    client.close(cb);
  });
};
>>>>>>> dev
